<!DOCTYPE html>
<html lang="ca">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="P√†gina web del casament d'Ester i Oriol, amb informaci√≥ sobre els detalls, el programa, el men√∫, l'allotjament i la confirmaci√≥ d'assist√®ncia (RSVP).">
    <meta name="keywords" content="casament, Ester, Oriol, detalls, programa, men√∫, allotjament, confirmaci√≥, RSVP">
    <title>Ester & Oriol - Ens casem!</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- Men√∫ horitzontal superior amb men√∫ hamburguesa -->
    <nav class="menu-superior" aria-label="Men√∫ principal">
        <div class="logo">E&O</div>
        <div class="menu-hamburguesa" id="menu-hamburguesa" aria-label="Obrir men√∫">&#9776;</div> <!-- Men√∫ hamburguesa -->
        <ul id="menu-links">
            <li><a href="#detalls">Detalls</a></li>
            <li><a href="#programa">Programa</a></li>
            <li><a href="#rsvp">RSVP</a></li>
            <li><a href="#menu">RSVP</a></li>

        </ul>
    </nav>

    <!-- Secci√≥ de Benvinguda amb v√≠deo -->
    <section class="hero">
        <video autoplay muted loop playsinline class="video-background" aria-label="V√≠deo de fons" preload="auto">
            <source src="video-de-fons.mp4" type="video/mp4">
            El teu navegador no suporta v√≠deos.
        </video>
        <div class="hero-text">
            <h1><span>Ester</span> & <span>Oriol</span></h1>
            <a href="#detalls" class="scroll-down" aria-label="Despla√ßar-se cap a la secci√≥ de detalls">&#x2193;</a>
        </div>
    </section>
    
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">

    
    <div class="hero-text">
        <h1 class="ens-casem">ENS CASEM!</h1>
    </div>

    <div class="custom-text">
        <p class="frase-ens-casem"> Despr√©s d'onze anys d'haver comen√ßat la nostra hist√≤ria, ens encantaria que pogu√©ssiu formar part de la nostra nova aventura. Us esperem amb molta il¬∑lusi√≥! </p>
    </div>

    


    <div class="hero-text">
        <h2 class="data_casament">05.07.25</h2>
    </div>
            
        



    <!-- Secci√≥ de Compte Enrere -->
    <section id="countdown" class="countdown">
        <h2>Falten</h2>
        <div id="countdown-timer">
            <div><span id="days"></span><p>Dies</p></div>
            <div><span id="hours"></span><p>Hores</p></div>
            <div><span id="minutes"></span><p>Minuts</p></div>
            <div><span id="seconds"></span><p>Segons</p></div>
        </div>
    </section>

    <div class="fulla_olivera">
        <img src="fulla_canva.jpg" alt="Separador hoja de olivo">
    </div>


    <!-- Secci√≥ del Programa -->
    <section id="programa" class="programa">
        <h2>Programa üìã</h2>
        <p>17.00h - Benvinguda</p>
        <p>17.30h - Cerim√≤nia</p>
        <p>18.00h - Cocktail</p>
        <p>20.00h - Sopar</p>
        <p>22.00h - Party!</p>
    </section>

    <div class="fulla_olivera">
        <img src="fulla_canva.jpg" alt="Separador hoja de olivo">
    </div>



    <!-- Secci√≥ de Confirmaci√≥ d'Assist√®ncia (RSVP) -->
    <section id="rsvp" class="rsvp">
        <h2>Confirmaci√≥ d'Assist√®ncia</h2>
        <p>Si us plau, confirma la teva assist√®ncia aqu√≠:</p>
        <a href="https://forms.gle/teu-enlla√ß-google-forms" target="_blank" class="rsvp-link">RSVP</a>
    </section>


    <div class="fulla_olivera">
        <img src="fulla_canva.jpg" alt="Separador hoja de olivo">
    </div>

       <!-- Secci√≥ de Detalls -->
    <section id="detalls" class="detalls">

        <div class="detall-item">
            <h2>üìç</h2>
            <p>Mas El Matr√≠, Viladrau</p>
        </div>
    </section>



    <!-- Like Button -->
    <div class="like-button">
        <span id="like-count">0</span>
        <div class="heart" id="heart"></div>
    </div>

    <!-- Comment Icon and Comment Box -->
    <div class="comment-icon-box">
        <div class="comment-icon" id="comment-icon">
            <!-- SVG del icono de comentario -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16h6m5 2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h11l4 4z" />
            </svg>
        </div>
        <!-- Caja de comentarios -->
        <div class="comment-box-horizontal" id="comment-box" style="display:none;">
            <textarea id="comment-input" placeholder="..."></textarea>
            <button id="submit-comment">Enviar</button>
        </div>
    </div>

    <script>
        // Scroll suau per la fletxa de benvinguda
        document.querySelector('.scroll-down').addEventListener('click', function(e) {
            e.preventDefault();
            document.querySelector('#detalls').scrollIntoView({
                behavior: 'smooth'
            });
        });

        // Canviar l'opacitat del men√∫ quan es fa scroll
        window.addEventListener('scroll', function () {
            var menu = document.querySelector('.menu-superior');
            if (window.scrollY > 50) {
                menu.classList.add('scrolled');
            } else {
                menu.classList.remove('scrolled');
            }
        });



        // Efecte parallax per al v√≠deo de fons en ordinadors
        window.addEventListener('scroll', function() {
            const videoBackground = document.querySelector('.video-background');
            let scrollPosition = window.pageYOffset;
            
            // Ajusta el moviment vertical del v√≠deo
            videoBackground.style.transform = 'translateY(' + scrollPosition * 0.5 + 'px)';
        });

        // Efecte parallax per a m√≤bils
        if (isMobile()) {
            window.addEventListener('scroll', function() {
                const videoBackground = document.querySelector('.video-background');
                let scrollPosition = window.pageYOffset;
                
                // Ajust m√©s suau per a m√≤bils
                videoBackground.style.transform = 'translateY(' + scrollPosition * 0.2 + 'px)';
            });
        }


        // Mostra i amaga el men√∫ en m√≤bils
        const menuHamburguesa = document.getElementById("menu-hamburguesa");
        const menuLinks = document.getElementById("menu-links");

        menuHamburguesa.addEventListener('click', function () {
            menuLinks.classList.toggle("mostrar");
            const isExpanded = menuLinks.classList.contains("mostrar");
            menuHamburguesa.setAttribute("aria-expanded", isExpanded);
        });

        // Tancar el men√∫ hamburguesa quan es fa clic en un enlla√ß
        document.querySelectorAll('#menu-links a').forEach(link => {
            link.addEventListener('click', () => {
                menuLinks.classList.remove('mostrar');
            });
        });

        // Compte enrere per al casament (20 d'agost de 2025)
        const weddingDate = new Date("August 20, 2025 00:00:00").getTime();

        const countdownFunction = setInterval(function() {
            const now = new Date().getTime();
            const timeLeft = weddingDate - now;

            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

            document.getElementById("days").innerText = days;
            document.getElementById("hours").innerText = hours;
            document.getElementById("minutes").innerText = minutes;
            document.getElementById("seconds").innerText = seconds;

            if (timeLeft < 0) {
                clearInterval(countdownFunction);
                document.getElementById("countdown-timer").innerHTML = "<h3>Ja estem casats!</h3>";
            }
        }, 1000);

        // Efecte parallax per a m√≤bils
        function isMobile() {
            return window.innerWidth <= 768;
        }

        if (isMobile()) {
            window.addEventListener('scroll', function() {
                const parallax = document.querySelector('.parallax');
                let scrollPosition = window.pageYOffset;
                parallax.style.backgroundPositionY = scrollPosition * 0.5 + 'px';
            });
        }

        // Canvi autom√†tic d'imatges de fons per a la secci√≥ 'historia'
        let bgIndex = 0;
        const bgImages = [
            'imatge-flores-Island.jpg',
            'familia-amb-balu.jpg'
        ];

        function changeBackground() {
            const historiaSection = document.querySelector('.slideshow-background');
            bgIndex = (bgIndex + 1) % bgImages.length;
            historiaSection.style.backgroundImage = `url(${bgImages[bgIndex]})`;
        }

        setInterval(changeBackground, 4000); // Canviem la imatge cada 4 segons
    </script>

    <script type="module">
        // Import the necessary Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-analytics.js";
        import { getDatabase, ref, get, set, push } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-database.js"; // Import Realtime Database

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCThyq7hjXkSpc44RUVxS9PHx9MYyF7M8I",
            authDomain: "web-casament-ester-i-oriol.firebaseapp.com",
            databaseURL: "https://web-casament-ester-i-oriol-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "web-casament-ester-i-oriol",
            storageBucket: "web-casament-ester-i-oriol.appspot.com",
            messagingSenderId: "271047282446",
            appId: "1:271047282446:web:de13785dddb38a9804d15f",
            measurementId: "G-YNNRHNKWTH"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        // Initialize Firebase Realtime Database
        const database = getDatabase(app);

        const likeCountSpan = document.getElementById("like-count");
        const likeButton = document.getElementById("heart");

        // Referencia al nodo de likes en la base de datos
        const likesRef = ref(database, 'likes');

        // Cargar los likes cuando se cargue la p√°gina
        get(likesRef).then((snapshot) => {
            if (snapshot.exists()) {
                likeCountSpan.textContent = snapshot.val();
            } else {
                likeCountSpan.textContent = 0;
            }
        }).catch((error) => {
            console.error("Error al obtener los likes:", error);
        });

        // Incrementar likes y actualizar la base de datos cuando se haga clic en el bot√≥n de coraz√≥n
        likeButton.addEventListener("click", function () {
            get(likesRef).then((snapshot) => {
                let currentLikes = 0;
                if (snapshot.exists()) {
                    currentLikes = snapshot.val();
                }
                const newLikeCount = currentLikes + 1;

                // Actualizar los likes en la base de datos
                set(likesRef, newLikeCount).then(() => {
                    // Actualizar el contador en la p√°gina
                    likeCountSpan.textContent = newLikeCount;

                    // A√±adir animaci√≥n de coraz√≥n
                    likeButton.classList.add("pressed");
                    setTimeout(() => {
                        likeButton.classList.remove("pressed");
                    }, 600);
                });
            }).catch((error) => {
                console.error("Error al actualizar los likes:", error);
            });
        });

        // Mostrar/ocultar caja de comentarios cuando se hace clic en el √≠cono de comentario
        const commentIcon = document.getElementById("comment-icon");
        const commentBox = document.getElementById("comment-box");
        commentIcon.addEventListener("click", function () {
            commentBox.style.display = (commentBox.style.display === "none" || commentBox.style.display === "") ? "flex" : "none";
        });

        // Comentarios - guardar en Firebase
        const commentsRef = ref(database, 'comments');
        document.getElementById("submit-comment").addEventListener("click", function () {
            const commentInput = document.getElementById("comment-input");
            const commentText = commentInput.value.trim();

            if (commentText.length > 0) {
                push(commentsRef, commentText)
                    .then(() => {
                        commentInput.value = "";
                        alert("Comentari enviat amb √®xit! Gr√†cies amic/amiga");
                    })
                    .catch((error) => {
                        console.error("Error al enviar el comentari:", error);
                    });
            } else {
                alert("Tio, has d'escriure algo.... el comentari no pot estar buit. ");
            }
        });


        // Funci√≥n para obtener comentarios aleatorios de Firebase
        function getRandomComments(comments, count) {
            const shuffled = comments.sort(() => 0.5 - Math.random()); // Mezcla los comentarios
            return shuffled.slice(0, count); // Devuelve un n√∫mero de comentarios aleatorio
        }

        // Manejar la l√≥gica de mostrar los comentarios aleatorios con efecto
        const showCommentsButton = document.getElementById("show-comments-button");
        const randomCommentsContainer = document.getElementById("random-comments");

        showCommentsButton.addEventListener("click", function () {
            // Obt√©n todos los comentarios de Firebase
            const commentsRef = ref(database, 'comments');
            get(commentsRef).then((snapshot) => {
                if (snapshot.exists()) {
                    const allComments = Object.values(snapshot.val());
                    const randomComments = getRandomComments(allComments, 3); // Obtener 3 comentarios aleatorios

                    // Limpiar la secci√≥n de comentarios aleatorios
                    randomCommentsContainer.innerHTML = '';

                    // A√±adir cada comentario aleatoriamente con el efecto de "explosi√≥n"
                    randomComments.forEach((comment, index) => {
                        const commentItem = document.createElement("div");
                        commentItem.classList.add("comment-item");
                        commentItem.textContent = comment;

                        // A√±adir el comentario al contenedor
                        randomCommentsContainer.appendChild(commentItem);

                        // Aplicar el efecto de explosi√≥n con un retraso
                        setTimeout(() => {
                                commentItem.classList.add("explode");
                            }, index * 300);

                            // Desaparecer los comentarios con desvanecimiento despu√©s de 2 segundos
                            setTimeout(() => {
                                commentItem.classList.add("fade-out");

                                // Eliminar el comentario visualmente despu√©s de la animaci√≥n de desvanecimiento
                                setTimeout(() => {
                                    commentItem.remove();
                                }, 800); // Tiempo para la transici√≥n de desvanecimiento
                            }, 2300); // Desaparecer despu√©s de 2 segundos
                        });
                    } else {
                        alert("No hi ha comentaris.");
                    }
                }).catch((error) => {
                    console.error("Error al obtenir els comentaris:", error);
                });
            });

    </script>



    <!-- Bot√≥n para mostrar comentarios -->
    <div class="show-comments-container">
        <button id="show-comments-button">Mostrar comentaris</button>
    </div>

    <!-- Secci√≥n donde aparecer√°n los comentarios aleatoris -->
    <div class="random-comments" id="random-comments"></div>
    

</body>

</html>
